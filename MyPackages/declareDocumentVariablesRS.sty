\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{declareDocumentVariablesRS}
          [2015/02/05 v1.1 Packages for declaring document variables by Robin Schneider]

\newcommand{\Typesetter}{\href{https://ypid.wordpress.com/}{Robin Schneider}\xspace}
% \publishers{\Typesetter}

\RequirePackage{%
  xifthen,
  IfconstructsRS,
  timeRS,
  xspace,
  ccicons,
  auto-pst-pdf,
  pst-barcode,
  authoraftertitle,
  xstring,
  legacyDeclareDocumentVariablesRS,
}

\newcommand{\SUBJECT}{}
\newcommand{\SetSUBJECT}[1]{%
  \renewcommand{\SUBJECT}{#1\xspace}%
  \ifthenelse{\isnamedefined{subject}}{\subject{\SUBJECT}}{}%
}

\newcommand{\URL}{}
\newcommand{\SetURL}[1]{\renewcommand{\URL}{#1}}
\newcommand{\printURLshort}{\ifthenelse{\equal{\URL}{}}{}{\url{\URL}\xspace}}
\newcommand{\printURLlong}[1][3cm]{%
  \ifthenelse{\equal{\URL}{}}{}{%
    \newlength{\hURLlongtextsize}%
    \iflandscape%
    {\setlength{\hURLlongtextsize}{21.5cm}}%  %% landscape
    {\setlength{\hURLlongtextsize}{12.5cm}}%  %% no landscape
    \ifthenelse{\isnamedefined{setkomavar}}{% scrlttr2
      \addtolength{\hURLlongtextsize}{-1cm}%
    }{}%
    \begin{center}%
    \ifthenelse{\lengthtest{\textwidth > 815pt}}    %% für lernator.de-Statistiken
      {\hspace{1.5cm}}{}
      \begin{minipage}{#1}%
        \begin{pspicture}(1in,1in)%
          \psbarcode{\URL}{eclevel=M width=1.3 height=1.3}{qrcode}%
        \end{pspicture}%
      \end{minipage}%
      \hfill
      \begin{minipage}{\hURLlongtextsize}%
        Dieses Dokument \ifgitversion{liegt in Version \printversion{} vor.\\
        Die aktuelle Version }{}ist als PDF Datei unter \printURLshort abrufbar.
        \LanguageURLlongExtension%
      \end{minipage}%
    \ifthenelse{\lengthtest{\textwidth > 815pt}}%    %% für lernator.de-Statistiken
      {\hspace{1.5cm}~}{}%
    \end{center}%
  }%
  \printGitURLlong%
}

\newcommand{\GitURL}{}
\newcommand{\SetGitURL}[1]{\renewcommand{\GitURL}{#1}}
\newcommand{\printGitURLlong}{%
  \ifthenelse{\equal{\GitURL}{}}{}{%
    \LanguageGitURLlong \url{\GitURL}
  }%
}

%% Create date {{{
\newboolean{@ifCREATEDATE}
\newcommand{\SetCREATEDATE}[7][]{
  \ifthenelse{\equal{#1}{usecurrent}}{
    \newcommand{\CREATEDYEAR}{\the\year}
    \newcommand{\CREATEDMONTH}{\the\month}
    \newcommand{\CREATEDDAY}{\the\day}
    \newcommand{\CREATEDHOUR}{\the\currenthour}
    \newcommand{\CREATEDMINUTE}{\the\currentminute}
    \newcommand{\CREATEDSECOND}{\the\currentsecond}
    \newcommand{\CREATEDATE}{\pdfdate}
    \setboolean{@ifCREATEDATE}{false}
  }{
    \IfInteger{#2}{}{\PackageError{\@currname}{Parameter 2 is not a number parameter.}}
    \IfInteger{#3}{}{\PackageError{\@currname}{Parameter 3 is not a number parameter.}}
    \IfInteger{#4}{}{\PackageError{\@currname}{Parameter 4 is not a number parameter.}}
    \IfInteger{#5}{}{\PackageError{\@currname}{Parameter 5 is not a number parameter.}}
    \IfInteger{#6}{}{\PackageError{\@currname}{Parameter 6 is not a number parameter.}}
    \IfInteger{#7}{}{\PackageError{\@currname}{Parameter 7 is not a number parameter.}}
    \newcommand{\CREATEDYEAR}{#2}
    \newcommand{\CREATEDMONTH}{#3}
    \newcommand{\CREATEDDAY}{#4}
    \newcommand{\CREATEDHOUR}{#5}
    \newcommand{\CREATEDMINUTE}{#6}
    \newcommand{\CREATEDSECOND}{#7}

    \newcommand{\CREATEDATE}{\CREATEDYEAR\CREATEDMONTH\CREATEDDAY%
      \CREATEDHOUR\CREATEDMINUTE\CREATEDSECOND}
    \setboolean{@ifCREATEDATE}{true}
  }
}
%% }}}

%% Author {{{
\newcommand{\AUTHOR}{\MyAuthor}
\newcounter{Author@ChosenNumber}  %% Sets the pdfcreator to \Typesetter
\newcommand{\SetAUTHOR}[2]{%
  \IfInteger{#1}{}{\PackageError{\@currname}{Parameter 1 is not a number parameter.}}
  \setcounter{Author@ChosenNumber}{#1}%% if #1 == 4
  \threeIF{#1}{\author{\Typesetter}}
    {\author{}}
    {\author{Name nicht Definiert\xspace}}
    {\author{#2\xspace}}  %% if #1 == 4
}
%% }}}

%% Release date {{{
\newcommand{\ABGABEDATUM}{\MyDate}
\newcommand{\SetABGABEDATUM}[5]{
  \IfInteger{#1}{}{\PackageError{\@currname}{Parameter 1 is not a number parameter.}}
  \IfInteger{#2}{}{\PackageError{\@currname}{Parameter 2 is not a number parameter.}}
  \IfInteger{#3}{}{\PackageError{\@currname}{Parameter 3 is not a number parameter.}}
  \IfInteger{#4}{}{\PackageError{\@currname}{Parameter 4 is not a number parameter.}}
  \IfInteger{#5}{}{\PackageError{\@currname}{Parameter 5 is not a number parameter.}}
  \newcounter{ReleaseDate@ChosenNumber}
  \setcounter{ReleaseDate@ChosenNumber}{#1}
  \sixIF{#1}{ %% if #1 == 1
      \date{\today}
    }{ %% if #1 == 2
      \date{vorgelegt am: \printdate{#4.#3.#2}}
      \newcommand{\ABGABETag}{#4}
      \newcommand{\ABGABEMonat}{#3}
      \newcommand{\ABGABEJahr}{#2}
    }{ %% if #1 == 3
      \newcounter{ReleaseDate@DaysUntilDate}
      \setcounter{ReleaseDate@DaysUntilDate}{#5}
      \date{vorgelegt am: \dateNday{#5}}
    }{ %% if #1 == 4
      \date{\printdate{#4.#3.#2}}
      \newcommand{\ABGABETag}{#4}
      \newcommand{\ABGABEMonat}{#3}
      \newcommand{\ABGABEJahr}{#2}
    }{ %% if #1 == 5
      \newcounter{ReleaseDate@DaysUntilDate}
      \setcounter{ReleaseDate@DaysUntilDate}{#5}
      \date{\dateNday{#5}}
    }{ %% if #1 == 6
      \date{\dateN{\CREATEDYEAR}{\CREATEDMONTH}{\CREATEDDAY}{#5}}
    }{\PackageError{\@currname}{Unknown parameter}}
}
%% }}}

\endinput
